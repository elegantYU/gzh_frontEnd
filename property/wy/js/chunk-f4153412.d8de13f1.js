(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f4153412"],{"10ca":function(t,e,s){"use strict";var i=s("5d4c"),o=s.n(i);o.a},"57e6":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tp_wrapper"},[s("h6",[t._v(t._s(t.village))]),s("div",{staticClass:"tp_form"},[s("div",{staticClass:"tp_input"},[s("label",[t._v("标题")]),s("div",{staticClass:"tp_input_box"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.v_form.title,expression:"v_form.title"}],attrs:{type:"text",placeholder:"请输入标题"},domProps:{value:t.v_form.title},on:{input:function(e){e.target.composing||t.$set(t.v_form,"title",e.target.value)}}})])]),s("div",{staticClass:"tp_input"},[s("label",[t._v("类型")]),s("div",{staticClass:"tp_input_box"},[s("mu-select",{attrs:{solo:!0,placeholder:"请选择类型"},model:{value:t.v_form.sourceType,callback:function(e){t.$set(t.v_form,"sourceType",e)},expression:"v_form.sourceType"}},t._l(t.v_type,function(t,e){return s("mu-option",{key:e,attrs:{label:t.name,value:t.type}})}),1)],1)]),s("div",{staticClass:"tp_input"},[s("label",[t._v("投放开始时间")]),s("div",{staticClass:"tp_input_box"},[s("mu-date-input",{attrs:{container:"bottomSheet",placeholder:"选择时间",solo:"","should-disable-date":t.f_startTimeRules,"full-width":!0,"clock-type":"24hr","view-type":"list",type:"dateTime",landscape:""},model:{value:t.v_form.postBegin,callback:function(e){t.$set(t.v_form,"postBegin",e)},expression:"v_form.postBegin"}})],1)]),s("div",{staticClass:"tp_input"},[s("label",[t._v("投放结束时间")]),s("div",{staticClass:"tp_input_box"},[s("mu-date-input",{attrs:{container:"bottomSheet",placeholder:"选择时间",solo:"","should-disable-date":t.f_endTimeRules,"full-width":!0,"clock-type":"24hr","view-type":"list",type:"dateTime",landscape:""},model:{value:t.v_form.postEnd,callback:function(e){t.$set(t.v_form,"postEnd",e)},expression:"v_form.postEnd"}})],1)])]),s("div",{staticClass:"ns_description"},[s("b",[t._v("内容描述")]),s("div",{staticClass:"ns_input"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.v_form.content,expression:"v_form.content"}],attrs:{placeholder:"请输入内容描述"},domProps:{value:t.v_form.content},on:{input:function(e){e.target.composing||t.$set(t.v_form,"content",e.target.value)}}})])]),s("div",{staticClass:"ns_upload"},[s("b",[t._v("图片")]),s("div",{staticClass:"ns_preview"},[t._l(t.v_form.img,function(e,i){return s("div",{key:i,staticClass:"ns_preview_list",on:{click:function(s){return t.f_bigger(e)}}},[s("i",{on:{click:function(e){return e.stopPropagation(),t.f_deleteImg(i)}}},[t._v("x")]),s("img",{attrs:{src:e,alt:""}})])}),s("a",{staticClass:"ns_preview_add",on:{click:t.f_upload}})],2)]),s("a",{staticClass:"ns_submit",on:{click:t.f_submit}},[t._v("发布")]),t.v_bigger?s("div",{staticClass:"bigger",on:{click:function(e){t.v_bigger=!1}}},[s("img",{attrs:{src:t.v_currentImg,alt:""}})]):t._e()])},o=[],a={data:function(){return{v_form:{title:"",content:"",sourceType:"3",sourceName:"物业",postBegin:"",postEnd:"",villageCode:"",img:[],status:1,createUserId:""},v_type:[{name:"热门活动",type:"3"}],v_bigger:!1,v_currentImg:""}},computed:{village:function(){return this.$store.state.village}},methods:{f_startTimeRules:function(t){var e=(new Date).getTime();return new Date(t).getTime()<e},f_endTimeRules:function(t){var e=this.v_form.postBegin?new Date(this.v_form.postBegin).getTime():(new Date).getTime();return new Date(t).getTime()<e},f_upload:function(t){var e=this;console.log("上传图片",this.v_form.img),this.v_form.img.length>2?this.$toast("最多三张图片"):this.$wxsdk.chooseImage().then(function(t){var s=t.localIds;s.map(function(t){e.$wxsdk.getLocalImgData(t).then(function(t){var s=t.localData,i=new FormData;i.append("base64",s),e.$http.post("/admin/file/upload2",i).then(function(t){var s=t.data.data;e.v_form.img.push(s)})})})})},f_submit:function(){var t=this;if(this.v_form.title&&this.v_form.content&&this.v_form.postBegin&&this.v_form.postEnd){this.v_form.createUserId=this.$store.state.user.id,this.v_form.villageCode=this.$store.state.villageCode;var e=this.v_form.img.join(";"),s=this.$moment(this.v_form.postBegin).format("YYYY-MM-DD HH:mm:ss"),i=this.$moment(this.v_form.postEnd).format("YYYY-MM-DD HH:mm:ss"),o=Object.assign({},this.v_form,{img:e,postBegin:s,postEnd:i});this.$http.post("/admin/event/wxCreate",o).then(function(e){var s=e.data.success;s?(t.$toast("发布成功"),t.$router.go(-1)):t.$toast("发布失败")})}else this.$toast("请填写完整")},f_bigger:function(t){this.v_bigger=!0,this.v_currentImg=t},f_deleteImg:function(t){this.v_form.img.splice(t,1)}}},n=a,r=(s("10ca"),s("2877")),l=Object(r["a"])(n,i,o,!1,null,"1668b940",null);e["default"]=l.exports},"5d4c":function(t,e,s){}}]);
//# sourceMappingURL=chunk-f4153412.d8de13f1.js.map