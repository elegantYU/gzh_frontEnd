(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-11297e5e"],{8010:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"rep_wrapper"},[i("div",{staticClass:"rep_content"},[i("h6",[t._v(t._s(t.v_info.communityName))]),i("div",{staticClass:"rep_from"},[i("div",{staticClass:"rep_input"},[i("label",[t._v("房屋名称")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.v_info.houseName,expression:"v_info.houseName"}],attrs:{type:"text",readonly:""},domProps:{value:t.v_info.houseName},on:{input:function(e){e.target.composing||t.$set(t.v_info,"houseName",e.target.value)}}})]),i("div",{staticClass:"rep_input"},[i("label",[t._v("报修类型")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.v_info.type,expression:"v_info.type"}],attrs:{type:"text",readonly:""},domProps:{value:t.v_info.type},on:{input:function(e){e.target.composing||t.$set(t.v_info,"type",e.target.value)}}})]),i("div",{staticClass:"rep_input"},[i("label",[t._v("标题")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.v_info.title,expression:"v_info.title"}],attrs:{type:"text",readonly:""},domProps:{value:t.v_info.title},on:{input:function(e){e.target.composing||t.$set(t.v_info,"title",e.target.value)}}})]),i("div",{staticClass:"rep_input"},[i("label",[t._v("联系人")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.v_info.userName,expression:"v_info.userName"}],attrs:{type:"text",readonly:""},domProps:{value:t.v_info.userName},on:{input:function(e){e.target.composing||t.$set(t.v_info,"userName",e.target.value)}}})]),i("div",{staticClass:"rep_input"},[i("label",[t._v("联系方式")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.v_info.telPhone,expression:"v_info.telPhone"}],attrs:{type:"text",readonly:""},domProps:{value:t.v_info.telPhone},on:{input:function(e){e.target.composing||t.$set(t.v_info,"telPhone",e.target.value)}}})]),i("div",{staticClass:"rep_input"},[i("label",[t._v("状态")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.status,expression:"status"}],attrs:{type:"text",readonly:""},domProps:{value:t.status},on:{input:function(e){e.target.composing||(t.status=e.target.value)}}})]),i("div",{staticClass:"rep_input"},[i("label",[t._v("预约时间")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.orderTime,expression:"orderTime"}],attrs:{type:"text",readonly:""},domProps:{value:t.orderTime},on:{input:function(e){e.target.composing||(t.orderTime=e.target.value)}}})]),i("div",{staticClass:"rep_input"},[i("label",[t._v("报修时间")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.v_info.createTime,expression:"v_info.createTime"}],attrs:{type:"text",readonly:""},domProps:{value:t.v_info.createTime},on:{input:function(e){e.target.composing||t.$set(t.v_info,"createTime",e.target.value)}}})])]),i("div",{staticClass:"rep_detail"},[i("b",[t._v("内容描述")]),i("div",{staticClass:"rep_detail_text"},[t._v("\n        "+t._s(t.v_info.detail)+"\n      ")])]),i("div",{staticClass:"rep_preview"},[i("b",[t._v("图片")]),i("div",{staticClass:"rep_preview_wrapper"},t._l(t.imgs,function(t,e){return i("div",{key:e,staticClass:"rep_preview_item"},[i("img",{attrs:{src:t,alt:""}})])}),0)]),2===t.v_info.sts||4===t.v_info.sts?i("div",{staticClass:"rep_comment"},[i("div",{staticClass:"rep_comment_btn",on:{click:t.f_submit}},[t._v(t._s(t.btnText))])]):t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:t.v_commments.length,expression:"v_commments.length"}],staticClass:"rep_commentList"},[i("p",[t._v("评论")]),i("mu-load-more",{attrs:{loading:t.v_loading,"loaded-all":t.v_loadAll},on:{load:t.f_loadComments}},[i("mu-list",[t._l(t.v_commments,function(e,s){return[i("div",{key:s,staticClass:"rep_comments_item"},[i("div",{staticClass:"rep_comments_item_top clearfix"},[i("div",{staticClass:"rep_comments_item_avatar"},[i("img",{attrs:{src:e.headIcon,alt:""}})]),i("div",{staticClass:"rep_comments_item_info"},[i("p",[t._v(t._s(e.createUserName))]),i("span",[t._v(t._s(e.createTime))])])]),i("div",{staticClass:"rep_comments_item_bottom"},[t._v(t._s(e.content))])])]})],2)],1)],1)])])},a=[],n=(i("96cf"),i("3b8d")),o=(i("ac6a"),i("28a5"),i("a481"),{name:"RepairDetail",data:function(){return{v_id:0,v_info:{},v_commments:[],v_commmentNum:1,v_loading:!1,v_loadAll:!1,v_sts:0}},mounted:function(){this.v_info=this.$store.state.currentRepair,this.f_getComments()},computed:{orderTime:function(){if(this.v_info.startTime){var t=this.v_info.startTime.replace(this.v_info.startTime.substr(this.v_info.startTime.length-3),""),e=this.v_info.endTime.replace(this.v_info.endTime.substr(this.v_info.endTime.length-3),""),i="".concat(t," ~ ").concat(e.split(" ")[1]);return i}},status:function(){switch(this.v_info.sts){case 1:case 2:return"待审核";case 3:return"未通过";case 4:return"待上门";case 5:return"待评论";case 6:return"已评论"}},btnText:function(){return 2==this.v_info.sts?(this.v_sts=4,"确认"):4==this.v_info.sts?(this.v_sts=5,"完成"):void 0},imgs:function(){return JSON.parse(v_info.img)}},methods:{f_getComments:function(){var t=this;this.$http.get("/admin/comment/list",{params:{rId:this.v_id,pageNum:this.v_commmentNum,pageSize:100}}).then(function(e){e.data.data.length||(t.v_loadAll=!0),e.data.data.forEach(function(e){t.v_commments.push(e)})})},f_loadComments:function(){var t=this;this.v_loading=!0,setTimeout(function(){t.v_loading=!1,t.v_commmentNum++,t.f_getComments()},1e3)},f_submit:function(){var t=this,e={rId:this.v_id,sts:this.v_sts};this.$http.post("/admin/property/repair/changeStatus",e).then(function(e){var i=e.data;i.success&&t.$toast("已确认")})},f_updateCommmentStatus:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e,i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e={id:this.v_id,sts:6},t.next=3,this.$http.post("/admin/property/repair/update",e);case 3:i=t.sent,s=i.data,s.success&&(this.v_info.sts=6);case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}}),r=o,m=(i("c4dc"),i("2877")),v=Object(m["a"])(r,s,a,!1,null,"d342d0a6",null);e["default"]=v.exports},c4dc:function(t,e,i){"use strict";var s=i("ca5f"),a=i.n(s);a.a},ca5f:function(t,e,i){}}]);
//# sourceMappingURL=chunk-11297e5e.0fefb0c3.js.map